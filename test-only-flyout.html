<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Galaxy Test</title>

    <!-- Performance: Preconnect to Klaviyo CDN -->
    <link rel="preconnect" href="https://static.klaviyo.com" crossorigin />
    <link rel="dns-prefetch" href="https://static.klaviyo.com" />

    <style>
      .container {
        height: 500px;
        width: 50%;
        border: 1px solid green;
        padding: 20px;
        box-sizing: border-box;
        position: relative;
      }
      .content-1 {
        border: 1px solid red;
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
      }

      .hover-effect {
        background-color: aquamarine;
      }

      /* Loading skeleton for Klaviyo forms */
      [class^="klaviyo-form-"] {
        min-height: 100px;
        position: relative;
      }

      [class^="klaviyo-form-"]::before {
        content: "";
        display: block;
        height: 100px;
        background: linear-gradient(
          90deg,
          #f0f0f0 25%,
          #e8e8e8 50%,
          #f0f0f0 75%
        );
        background-size: 200% 100%;
        animation: klaviyo-loading 1.5s infinite;
        border-radius: 4px;
      }

      [class^="klaviyo-form-"].klaviyo-loaded::before {
        display: none;
      }

      @keyframes klaviyo-loading {
        0% {
          background-position: 200% 0;
        }
        100% {
          background-position: -200% 0;
        }
      }
    </style>
  </head>
  <body style="margin: 0">
    <!--<div class="klaviyo-form-YanyUp"></div>
    <div class="klaviyo-form-StNbGd"></div>
    <div class="klaviyo-form-SHwSjN"></div>
    <div class="klaviyo-form-RmF6gM"></div> -->

    <script>
      (function () {
        // BLOCK the TQukzn form from auto-displaying
        window._klOnsite = window._klOnsite || [];
        /*
        // COMMENTED OUT - This would trigger the TQukzn form
        window._klOnsite.push(['openForm', 'TQukzn']);
        */

        window._klOnsite.push(["openForm", "TQukzn"]);
        // Flag to prevent duplicate loads
        let klaviyoScriptLoaded = false;
        let klaviyoFormsInitialized = false;

        function initKlaviyoForms() {
          // Prevent multiple initializations
          if (klaviyoFormsInitialized) return;
          klaviyoFormsInitialized = true;

          // Remove loading skeleton once forms are loaded
          setTimeout(() => {
            document
              .querySelectorAll('[class^="klaviyo-form-"]')
              .forEach((form) => {
                form.classList.add("klaviyo-loaded");
              });
          }, 500);

          // Debug: Log all Klaviyo forms that are loaded
          console.log("=== KLAVIYO FORMS DEBUG ===");
          console.log(
            "Embedded forms (manual):",
            document.querySelectorAll('[class^="klaviyo-form-"]').length,
          );

          // Check for auto-injected forms after a delay
          /* setTimeout(() => {
            const autoForms = document.querySelectorAll(
              '.needsclick, [class*="kl-private-reset-css"]',
            );
            console.log("Auto-injected forms found:", autoForms.length);
            autoForms.forEach((form, index) => {
              console.log(`Form ${index + 1}:`, {
                classes: form.className,
                id: form.id,
                innerHTML: form.innerHTML.substring(0, 200) + "...",
              });

              // Hide the TQukzn form if it appears
              if (
                form.innerHTML.includes("TQukzn") ||
                form.innerHTML.includes("Join Us")
              ) {
                console.log("⚠️ Hiding TQukzn form (commented out)");
                form.style.display = "none";
              }
            });
          }, 1000);*/
        }

        // Load Klaviyo script only once
        function loadKlaviyoScript() {
          if (klaviyoScriptLoaded) return;
          klaviyoScriptLoaded = true;

          const kl = document.createElement("script");
          kl.type = "text/javascript";
          kl.async = true;
          kl.src =
            "https://static.klaviyo.com/onsite/js/klaviyo.js?company_id=YwabkH";
          kl.onload = initKlaviyoForms;
          document.head.appendChild(kl);
        }

        // Start loading immediately
        loadKlaviyoScript();
      })();

      // DOM-related scripts - wait for DOMContentLoaded
      document.addEventListener("DOMContentLoaded", () => {
        // Your custom form query (waits for DOM to be ready)
        console.log("before form ");
        const form = document.querySelector('[data-testid="hiahiahia"]');
        console.log("form ", form);

        // Hover effect logic
        const innerContainer = document.querySelector(".content-1");

        if (innerContainer) {
          innerContainer.addEventListener("mouseenter", () => {
            innerContainer.classList.add("hover-effect");
          });

          innerContainer.addEventListener("mouseleave", () => {
            innerContainer.classList.remove("hover-effect");
          });
        }

        // Optional: Mouse tracking (currently commented out)
        /*window.addEventListener("mousemove", (event) => {
          console.log(event.clientX, event.clientY);
        });*/
      });
    </script>
  </body>
</html>
